# IP와 라우팅

## IP(Internet Protocol)
 > **네트워크 계층**에서 동작하는 프로토콜로, 서로 다른 네트워크 간에서 패킷을 목적지까지 전달하기 위한 **논리적 주소 체계**를 제공

 - 비연결형(Connectionless)
 - 비신뢰성(Best-effort)
 - 패킷 단위 전달

## IPv4와 IPv6 비교
| 구분 | IPv4 | IPv6 |
|----|----|----|
| 주소 길이 | 32비트 | 128비트 |
| 주소 수 | 약 43억 개 | 사실상 무한 |
| 주소 표현 | 10진수 점 표기 | 16진수 콜론 표기 |
| 헤더 구조 | 가변 길이 | 고정 길이 |
| 주소 부족 | 발생 | 해결 |

## 서브넷(Subnetwork)
> 하나의 IP 네트워크를 **네트워크 영역과 호스트 영역으로 구분하여**   
> 더 작은 네트워크 단위로 분할하는 기법

### 서브넷의 목적
 - IP 주소 효율적 사용
 - 브로드캐스트 범위 축소
 - 네트워크 관리 용이

### 서브넷 마스크
 - IP 주소에서 네트워크 영역과 호스트 영역을 구분하는 비트 마스크
 - 연속된 `1` → 네트워크 영역  
 - 연속된 `0` → 호스트 영역
 ```text
 255.255.255.0  →  /24
 11111111.11111111.11111111.00000000
 <──────── 24 bits ───────><-8 bits->
           네트워크            호스트
 ```

### CIDR(Classless Inter-Domain Routing)
 - 클래스 기반 주소 할당 (Class A/ B/ C)의 한계를 보완
 - 네트워크 크기를 비트 단위로 유연하게 조절

### 서브넷 계산
 - 네트워크 주소: 호스트 비트가 모두 `0`
 - 브로드캐스트 주소: 호스트 비트가 모두 `1`
 - 사용 가능한 호스트 수: `2^호스트비트 -2`

## 라우팅(Routing)
> 패킷이 목적지 네트워크까지 도달하기 위한 **최적의 경로 설정** 과정

 - 라우터가 수행
 - 라우팅 테이블 기반 동작
 - 다음 홉(Next Hop) 결정
 - 매트릭(Metric)을 기준으로 경로 선택

## 라우팅 프로토콜
> 라우터 간 경로 정보를 교환하고 갱신하기 위한 규칙

### 정적 라우팅(Static Routing)
 - 관리자가 직접 경로 설정
 - 구조 단순, 예측 가능
 - 네트워크 변경 시 수동 수정 필요
 - 소규모, 변경이 적은 네트워크에 적합

### 동적 라우팅(Dynamic Routing)
 - 라우터 간 정보 교환을 통해 경로 자동 갱신
 - 네트워크 변경에 유연
 - 대규모 네트워크에 적합
 - 라우팅 프로토콜에 따라 **경로 선택 기준(매트릭)** 이 다름

#### RIP(Routing Information Protocol)
 - **거리 벡터 방식** (Distance Vector)
 - 홉 수(Hop Count) 기준 경로 선택
 - 최대 홉 수 : 15 (16은 도달 불가로 간주)
 - 주기적으로(약 30초) 전체 라우팅 정보 전송
 - 구조 단순하지만 확장성 낮음
 - 수렴 속도 느림 → 라우팅 루프 발생 가능
 - 내부 네트워크용 라우팅 프로토콜(IGP) 

#### OSPF(Open Shortest Path First)
 - **링크 상태 방식** (Link State)
 - 대역폭(Cost) 기준 경로 선택
 - 변경 발생 시에만 정보 전파
 - 빠른 수렴 속도
 - 대규모 네트워크에 적합
 - 내부 네트워크용 라우팅 프로토콜(IGP)

#### BGF(Border Gateway Protocol)
 - **자율 시스템(AS)간 라우팅 프로토콜**
 - **정책 기반** 경로 선택
 - 경로의 안정성과 정책을 우선
 - 인터넷 백본 라우팅의 핵심
 - 외부 네트워크 간 라우팅(EGP)

## 라우팅 프로토콜 비교
| 구분 | RIP | OSPF | BGP |
|----|----|----|----|
| 분류 | IGP | IGP | EGP |
| 방식 | 거리 벡터 | 링크 상태 | 경로 벡터 |
| 기준 | 홉 수 | 대역폭 | 정책 |
| 수렴 속도 | 느림 | 빠름 | 느림 |
| 적용 범위 | 소규모 | 대규모 내부망 | 인터넷 |
