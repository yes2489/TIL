# 네트워크 장비와 계층별 역할

## 네트워크 장비
 네트워크 장비는 OSI 7계층 중 특정 계층에서 동작하며, 동작 계층에 따라 데이터 처리 방식이 달라짐

## 허브(Hub)
 > 물리 계층에서 수신한 신호를 모든 포트로 그대로 재전송하는 역할

 - 주소 개념 없음
 - 수신한 신호를 복제해서 모든 포트에 전송하기 때문에 연결된 모든 장치가 충돌 도메인 공유
 - 충돌 발생 가능
 - 트래픽 증가에 취약

## 스위치(Switch)
 > 데이터 링크 계층에서 MAC 주소를 기반으로 목적지 포트로만 프레임 전달

 - MAC 주소 테이블 사용
 - 충돌 도메인 분리
 - 브로드캐스트 프레임은 모든 포트로 전달
 - LAN 환경에서 가장 일반적으로 사용

## 라우터(Router)
 > 네트워크 계층에서 IP 주소를 기반으로 서로 다른 네트워크 간 패킷 전달

 - 라우팅 테이블 사용
 - 브로드캐스트 도메인 분리

## 장비별 계층 비교
| 장비 | 동작 계층 | 기준 주소 | 주요 역할 |
|----|----|----|----|
| 허브 | 물리 계층 | 없음 | 신호 재전송 |
| 스위치 | 데이터 링크 계층 | MAC 주소 | 프레임 전달 |
| 라우터 | 네트워크 계층 | IP 주소 | 서로 다른 네트워크 간 연결 |

## 패킷 처리 흐름 (캡슐화)
 1. 송신 호스트에서 응용 계층 데이터 생성
 2. 전송 계층에서 세그먼트 생성(TCP/UDP)
 3. 네트워크 계층에서 IP 패킷 생성
 4. 데이터 링크 계층에서 프레임 생성
 5. 물리 계층을 통해 비트 단위로 전송
 
 ### ※ 역캡슐화 과정 (수신)
 1. 물리 계층에서 비트 수신
 2. 데이터 링크 계층에서 프레임 제거
 3. 네트워크 계층에서 IP 패킷 제거
 4. 전송 계층에서 세그먼트 제거
 5. 응용 계층에서 데이터를 수신 호스트에게 전달

---
## 네트워크 장비를 통한 처리 흐름
### 허브를 통과하는 경우
 - 수신된 신호를 모든 포트로 전달
 - 목적지 판단 없음

### 스위치를 통과하는 경우
 - 수신 프레임의 목적지 MAC 주소 확인
 - MAC 주소 테이블을 조회하여 해당 포트로만 전달

### 라우터를 통과하는 경우
 - 수신 패킷의 목적지 IP 주소 확인
 - 라우팅 테이블을 통해 다음 홉 결정
 - 새로운 프레임으로 캡슐화하여 전달